---
import BentoServices from "../reutilizables/BentoServices.astro";
import Container from "../reutilizables/Container.astro";
---

<section
  id="Seguros_Patrimoniales"
  class="relative overflow-hidden"
>
  <div class="">
    <img
      class="hidden lg:block w-auto h-[calc(100%/3)] absolute top-1/2 -left-[20%] xl:-left-[6%] translate-y-[-50%] opacity-70"
      src="/resources/asterisco-fino.svg"
      alt=""
    />
  </div>
  <div class="">
    <img
      class="hidden lg:block w-auto lg:h-[400px] xl:h-[500px] absolute xl:-bottom-[50px] lg:-bottom-[20px] -right-[60%] lg:-right-[20%] xl:-right-[15%] 2xl:-right-[10%] rotate-[85deg] opacity-30"
      src="/resources/flechas-rojo-verde.svg "
      alt=""
    />
  </div>
  <Container>
    <div class="grid__container w-full md:w-[70%] mt-10">
      <button class="card1 card justify-end">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">I. COMERCIO</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/comercio.avif')] bg-contain bg-right-bottom bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card2 card">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">AUTOMOTORES</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/auto.avif')] bg-contain bg-right-bottom lg:bg-[right_-50px_bottom_-50px] bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card3 card">
        <div class="w-full h-full flex justify-end mr-4">
          <p class="text-gray-50 texto font-light">ART</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/art.avif')] bg-cover bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card4 card">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">HOGAR</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/hogar.avif')] bg-contain bg-right-bottom bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>
      <button class="card5 card">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">CAUCION</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/caucion.avif')] 2xl:bg-[right_bottom] bg-cover bg-left-bottom bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card6 card">
        <div class="w-full h-full flex justify-center items-start px-[10px]">
          <p class="text-gray-50 texto font-light">CONSORCIO</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/consorcio.avif')] bg-cover bg-[center_bottom_-50px] bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card7 card">
        <div class="w-full h-full flex justify-end mr-4">
          <p class="text-gray-50 texto font-light">ACCIDENTES</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/retiro.avif')] bg-cover bg-[right_-80px_bottom] lg:bg-[right_-10px_bottom] 2xl:bg-[right_-10px_bottom_-20px] bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card8 card">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">I. COMERCIO</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/comercio.avif')] bg-contain bg-[right_bottom_-5px] bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>

      <button class="card9 card">
        <div class="w-full h-full flex ml-4">
          <p class="text-gray-50 texto font-light">CAUCION</p>
        </div>

        <div
          class="absolute w-full h-full bg-[url('/img/caucion.avif')] bg-cover bg-[right_bottom] 2xl:bg-[right_bottom_-50px] bg-no-repeat"
        >
        </div>
        <div class="absolute ver__mas">
          <p class="text-gray-50 text-[clamp(20px,3vw,40px)]">Ver Mas +</p>
        </div>
      </button>
    </div>

    <!-- <BentoServices /> -->
  </Container>
  <dialog
    class="w-full h-full xl:w-[80%] xl:h-[80%] backdrop-blur-md bg-[#565e5b] rounded-[20px] flex-col justify-center items-center"
  >
    <form method="dialog">
      <button id="close">close</button>
    </form>
  </dialog>
</section>

<style>
  .grid__container {
    position: relative;
    z-index: 20;

    display: grid;
    grid:
      "card1 card1 card1 card1 card1 card1 card2 card2 card2 card2 card2 card2" 1fr
      "card3 card3 card3 card3 card3 card4 card4 card4 card4 card4 card4 card4" 1fr
      "card5 card5 card5 card5 card6 card6 card6 card6 card7 card7 card7 card7" 1fr
      "card8 card8 card8 card8 card8 card8 card8 card9 card9 card9 card9 card9" 1fr
      / 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
    gap: 18px;
  }

  .grid__container:has(.card:hover) .card:not(:hover) {
    filter: grayscale(70%);
    opacity: 30%;
  }

  .card {
    z-index: 20;
    overflow: hidden;
    display: flex;
    position: relative;
    width: 100%;
    min-height: 300px;
    max-height: 550px;
    border-radius: 20px;

    transition: all 0.3s linear;
    cursor: pointer;

    &:hover {
      scale: 1.05;
    }

    &:hover .ver__mas {
      opacity: 1;
    }
    &:focus .ver__mas {
      opacity: 1;
    }

    .texto {
      font-size: clamp(20px, 4vw, 42px);
    }
  }

  .ver__mas {
    opacity: 0;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #000000c4;

    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s linear 0.1s;
  }

  .card1 {
    grid-area: card1;
    background-color: #6fa29d;
  }
  .card2 {
    grid-area: card2;
    background-color: #1d1e1c;
  }
  .card3 {
    grid-area: card3;
    background-color: #393737;
  }
  .card4 {
    grid-area: card4;
    background-color: #18403e;
  }
  .card5 {
    grid-area: card5;
    background-color: #1a191a;
  }
  .card6 {
    grid-area: card6;
    background-color: #f05759;
  }
  .card7 {
    grid-area: card7;
    background-color: #518d87;
  }
  .card8 {
    grid-area: card8;
    background-color: #393737;
  }
  .card9 {
    grid-area: card9;
    background-color: #e8abac;
  }

  dialog {
    scale: 0;
    opacity: 0;
    transition:
      scale 0.3s linear,
      display 0.4s linear allow-discrete,
      opacity 0.4s linear;
  }

  dialog[open] {
    opacity: 1;
    scale: 1;
    transition:
      scale 0.3s linear,
      opacity 0.4s linear;

    @starting-style {
      scale: 0;
      opacity: 0;
    }
  }

  dialog::backdrop {
    backdrop-filter: blur(4px);
    background: rgba(0, 0, 0, 0.26);
  }
</style>

<script>
  document.addEventListener("astro:page-load", () => {
    const btnDialog = document.querySelectorAll("button");
    const dialog = document.querySelector("dialog");

    const close = document.getElementById("close");

    btnDialog.forEach((btn) => {
      btn.addEventListener("click", () => {
        dialog.showModal();
      });
    });

    close.addEventListener("click", () => {
      dialog.close();
      const activeElement = document.activeElement;
      if (activeElement instanceof HTMLElement) {
        activeElement.blur();
      }
    });
  });
</script>

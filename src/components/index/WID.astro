---
import data from "../../data/historia.json";
import Button from "../reutilizables/Button.astro";
import Container from "../reutilizables/Container.astro";
import GridWid from "../reutilizables/GridWid.astro";
import TitleWid from "../reutilizables/TitleWid.astro";
import textGrid from "../../data/textGrid.json";
import { WidScrollReveal } from "../react_components/wid/WidScrollReveal";
const textTitle = " Asegurarse es la nueva moda";
---

<section
  id="wid"
  class="z-10 relative w-full h-auto place-content-center mx-auto overflow-hidden bg-[#fff5eb]"
>
  <div
    class="wid relative w-full h-auto place-content-center mx-auto overflow-hidden rounded-[100px] bg-slate-600"
  >
    <div class="">
      <img
        class="hidden md:block w-auto h-[calc(100%/2)] absolute top-0 -left-1 translate-y-[-50%] opacity-30 z-[1]"
        src="/resources/medio-espiral.svg"
        alt=""
      />
    </div>
    <!-- <div>
      <img
        class="hidden md:block w-auto h-[calc(100%/7)] absolute bottom-28 -left-16 rotate-[-30deg] opacity-30"
        src="/resources/corazon-paragua.svg"
        alt=""
      />
    </div> -->
    <div>
      <img
        class="hidden lg:block w-auto h-[calc(100%/4)] absolute bottom-0 -right-2 opacity-60"
        src="/resources/media-caña.svg"
        alt=""
      />
    </div>

    <Container>
      <div class="mx-auto w-full mt-10">
        <!-- <TitleWid text={textTitle} /> -->

        <div class="hidden relative z-20 md:grid w-full place-content-center">
          <div
            class="mt-10 py-10 w-full backdrop-blur-sm bg-lcsPink1/20 rounded-[20px] cursor__personalizado"
          >
            <WidScrollReveal client:only="react" />
          </div>
        </div>

        <!-- <GridWid
          text1={textGrid.text1}
          text2={textGrid.text2}
          text3={textGrid.text3}
          text4={textGrid.text4}
        /> -->

        <div
          class="w-full md:hidden flex flex-col justify-center items-center gap-4 my-20 relative z-10"
        >
          <div class="texto">
            <p>{textGrid.text1}</p>
            <p>{textGrid.text2}</p>
          </div>
          <img
            class="w-[80%] h-auto mx-auto rounded-[20px]"
            src="/img/foto2-mock.avif"
            alt=""
          />
          <div class="texto">
            <p>{textGrid.text3}</p>
            <p>{textGrid.text4}</p>
          </div>
        </div>

        <div
          class="w-full flex justify-center items-center my-14 relative z-10"
        >
          <div
            class="flex flex-col md:flex-row justify-center gap-4 md:gap-8 items-center w-full md:w-[70%] lg:w-[80%]"
          >
            <div class="bg-[#fef0e9] rounded-full overflow-hidden min-w-fit">
              <img
                class="object-cover w-[150px] h-[150px]"
                src="/img/e-cute.avif"
                alt=""
              />
            </div>

            <!--  <div
              class="grid place-items-center w-auto md:flex flex-wrap lg:w-[70%] gap-x-3"
            >
              {
                data.map((item, index) => {
                  return (
                    <span
                      class="text-gray-50 text-[clamp(15px,2.1vw,18px)] 
                historia-item opacity-30  flex items-center gap-2 whitespace-nowrap "
                    >
                      {item.text}
                      {index !== data.length - 1 && (
                        <img
                          class="h-[clamp(15px,2.1vw,18px)] min-w-[13px]"
                          src="/resources/flecha-texto.svg"
                          alt=""
                        />
                      )}{" "}
                    </span>
                  );
                })
              }
            </div> -->

            <div
              class="flex max-w-full items-center flex-wrap gap-x-2 w-full text-gray-50 text-[clamp(15px,2.1vw,18px)] bg-blue-500"
            >
              {
                data.map((item, index) => (
                  <span class="flex items-center gap-2 text-nowrap">
                    <span>{item.text}</span>
                    {index !== data.length - 1 && (
                      <img
                        class="h-[clamp(15px,2.1vw,18px)] "
                        src="/resources/flecha-texto.svg"
                        alt=""
                      />
                    )}
                  </span>
                ))
              }
            </div>
          </div>
        </div>

        <!--         <div
          id="guia_descarga"
          class="w-full place-items-center mx-auto mb-8 relative z-10"
        >
          <div class="w-full md:w-[80%]">
            <p class="text-gray-50 text-center text-[clamp(30px,3vw,50px)]">
              El mundo sin Seguro, no tiene sentido.
            </p>
          </div>
        </div>
        <div class="w-full place-items-center mx-auto mb-14 z-10">
          <div class="w-full md:w-[80%] lg:w-[60%] xl:w-[50%]">
            <p
              class="text-gray-50 text-center text-pretty text-[clamp(16px,3vw,20px)]"
            >
              Es probable que todo lo que sepas sobre el mundo asegurador sea un
              cuento, un mito o la nada misma. No tenés idea de todo lo que
              podés construir usandolo a tu favor. Esta guía es perfecta para
              vos.
            </p>
          </div>
        </div>
        <div class="w-full place-items-center mx-auto mb-20 relative z-10">
          <Button
            title1="Descargate la guía"
            title2="Aprendé a leer tu póliza"
          />
        </div>
      </div> -->
      </div>
    </Container>
  </div>
  <style>
    .wid {
      background-image: linear-gradient(180deg, #518d87 33%, #c86363 100%);
    }
    .texto {
      padding-inline: 5px;
      width: 100%;
      font-size: 18px;
      font-weight: 300;
      color: azure;
      text-align: left;
      text-wrap: pretty;
    }
    .texto :nth-child(1) {
      margin-bottom: 16px;
    }

    .historia-item-animation {
      opacity: 0.3;
      animation: animationHistoria 3s ease-in-out infinite;
    }

    @keyframes animationHistoria {
      0% {
        opacity: 0.3;
      }
      20% {
        opacity: 1;
      }
      80% {
        opacity: 1;
      }

      100% {
        opacity: 0.3;
      }
    }

    .over-word {
      overflow-wrap: anywhere;
    }
    .cursor__personalizado {
      cursor: url("/resources/scroll-icon.svg"), auto;
    }
  </style>
  <script>
    document.addEventListener("astro:page-load", () => {
      const historiaItems = document.querySelectorAll(".historia-item");
      let currentIndex = 0;

      function animateItems() {
        historiaItems.forEach((item, index) => {
          item.classList.remove("historia-item-animation");
          if (index === currentIndex) {
            item.classList.add("historia-item-animation");
          }
        });

        currentIndex = (currentIndex + 1) % historiaItems.length;
      }

      setInterval(animateItems, 3000);
      animateItems();
    });
  </script>
</section>

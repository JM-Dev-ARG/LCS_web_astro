---
import data from "../../data/historia.json";
import Button from "../reutilizables/Button.astro";
import Container from "../reutilizables/Container.astro";
import GridWid from "../reutilizables/GridWid.astro";
import TitleWid from "../reutilizables/TitleWid.astro";
import textGrid from "../../data/textGrid.json";
import { WidScrollReveal } from "../react_components/wid/WidScrollReveal";
const textTitle = " Asegurarse es la nueva moda";
---

<section
  id="wid"
  class="z-10 relative w-full h-auto place-content-center mx-auto overflow-hidden bg-[#fff5eb]"
>
  <div
    class="wid relative w-full h-auto place-content-center mx-auto overflow-hidden rounded-[100px] bg-slate-600"
  >
    <div class="">
      <img
        class="hidden md:block w-auto h-[calc(100%/4)] absolute top-1/2 -left-2 translate-y-[-50%] opacity-30 z-[1]"
        src="/resources/medio-espiral.svg"
        alt=""
      />
    </div>
    <div>
      <img
        class="hidden md:block w-auto h-[calc(100%/7)] absolute bottom-28 -left-16 rotate-[-30deg] opacity-30"
        src="/resources/corazon-paragua.svg"
        alt=""
      />
    </div>
    <div>
      <img
        class="hidden lg:block w-auto h-[calc(100%/4)] absolute bottom-0 -right-2 opacity-60"
        src="/resources/media-caña.svg"
        alt=""
      />
    </div>

    <Container>
      <div class="mx-auto w-full mt-10">
        <TitleWid text={textTitle} />

        <div class="hidden relative z-20 md:grid w-full place-content-center">
          <div
            class="mt-10 py-10 w-full backdrop-blur-sm bg-lcsPink1/20 rounded-[20px] cursor__personalizado"
          >
            <WidScrollReveal client:only="react" />
          </div>
        </div>

        <!-- <GridWid
          text1={textGrid.text1}
          text2={textGrid.text2}
          text3={textGrid.text3}
          text4={textGrid.text4}
        /> -->

        <div
          class="w-full md:hidden flex flex-col justify-center items-center gap-4 my-20 relative z-10"
        >
          <div class="texto">
            <p>{textGrid.text1}</p>
            <p>{textGrid.text2}</p>
          </div>
          <img
            class="w-[80%] h-auto mx-auto rounded-[20px]"
            src="/img/foto2-mock.avif"
            alt=""
          />
          <div class="texto">
            <p>{textGrid.text3}</p>
            <p>{textGrid.text4}</p>
          </div>
        </div>

        <div
          class="w-full flex justify-center items-center my-14 relative z-10"
        >
          <div
            class="flex flex-col md:flex-row justify-center gap-4 md:gap-8 items-center w-full lg:w-[75%] 2xl:w-[55%]"
          >
            <div class="bg-[#fef0e9] rounded-full overflow-hidden">
              <img
                class="object-cover w-[180px] h-[180px] md:w-[200px] md:h-[200px]"
                src="/img/e-cute.avif"
                alt=""
              />
            </div>
            <div
              class="grid place-items-center w-auto lg:inline lg:w-[calc(100%-300px)]"
            >
              {
                data.map((item, index) => {
                  return (
                    <div
                      class="text-gray-50 text-[clamp(18px,2.1vw,20px)] inline-flex
              items-center gap-2 mr-3 historia-item opacity-30"
                    >
                      <p>{item.text}</p>{" "}
                      {index !== data.length - 1 && (
                        <span>
                          <img
                            class="h-[clamp(18px,2.1vw,20px)] w-auto"
                            src="/resources/flecha-texto.svg"
                            alt=""
                          />{" "}
                        </span>
                      )}
                    </div>
                  );
                })
              }
            </div>
          </div>
        </div>

        <div
          id="guia_descarga"
          class="w-full place-items-center mx-auto mb-8 relative z-10"
        >
          <div class="w-full md:w-[80%]">
            <p class="text-gray-50 text-center text-[clamp(30px,3vw,50px)]">
              El mundo sin Seguro, no tiene sentido.
            </p>
          </div>
        </div>
        <div class="w-full place-items-center mx-auto mb-14 z-10">
          <div class="w-full md:w-[80%] lg:w-[60%] xl:w-[50%]">
            <p
              class="text-gray-50 text-center text-pretty text-[clamp(16px,3vw,20px)]"
            >
              Es probable que todo lo que sepas sobre el mundo asegurador sea un
              cuento, un mito o la nada misma. No tenés idea de todo lo que
              podés construir usandolo a tu favor. Esta guía es perfecta para
              vos.
            </p>
          </div>
        </div>
        <div class="w-full place-items-center mx-auto mb-20 relative z-10">
          <Button
            title1="Descargate la guía"
            title2="Aprendé a leer tu póliza"
          />
        </div>
      </div>
    </Container>
  </div>
</section>
<style>
  .wid {
    background-image: linear-gradient(180deg, #518d87 33%, #c86363 100%);
  }
  .texto {
    padding-inline: 5px;
    width: 100%;
    font-size: 18px;
    font-weight: 300;
    color: azure;
    text-align: left;
    text-wrap: pretty;
  }
  .texto :nth-child(1) {
    margin-bottom: 16px;
  }

  .historia-item-animation {
    opacity: 0.3;
    animation: animationHistoria 3s ease-in-out infinite;
  }

  @keyframes animationHistoria {
    0% {
      opacity: 0.3;
    }
    20% {
      opacity: 1;
    }
    80% {
      opacity: 1;
    }

    100% {
      opacity: 0.3;
    }
  }

  .cursor__personalizado {
    cursor: url("/resources/scroll-icon.svg"), auto;
  }
</style>
<script>
  document.addEventListener("astro:page-load", () => {
    const historiaItems = document.querySelectorAll(".historia-item");
    let currentIndex = 0;

    function animateItems() {
      historiaItems.forEach((item, index) => {
        item.classList.remove("historia-item-animation");
        if (index === currentIndex) {
          item.classList.add("historia-item-animation");
        }
      });

      currentIndex = (currentIndex + 1) % historiaItems.length;
    }

    setInterval(animateItems, 3000);
    animateItems();
  });
</script>
